<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
         * {
             margin: 0;
             padding: 0;
         }
         html, body {
             width: 100%;
             height: 100%;
         }
         .wrap {
             position: relative;
             /* overflow-y: auto; */
         }
         .wrap > div {
             width: 126.3px;
             position: absolute;
             top: 100%;
             left: 50%; 
             color: white;
             transition: all 1s;
             display: flex;
             align-items: center;
             justify-content: center;
             font-size: 20px;
         }
    </style>
</head>
<body>
    <div class="wrap">
        <!-- <div style="height: 100px;background-color: blue;">1</div>
        <div style="height: 85px;background: aqua;">2</div>
        <div style="height: 76px;background: rgb(24, 88, 104);">3</div>
        <div style="height: 49px;background: rgb(211, 177, 25);">4</div>
        <div style="height: 159px;background: rgb(29, 3, 20);">5</div>
        <div style="height: 357px;background: rgb(0, 0, 0);">6</div>
        <div style="height: 123px;background: rgba(0, 0, 0, 0.425);">7</div>
        <div style="height: 258px;background: rgb(0, 0, 0);">8</div>
        <div style="height: 147px;background: rgb(86, 187, 132);">9</div>
        <div style="height: 369px;background: rgb(62, 134, 192);">10</div>
        <div style="height: 221px;background: rgb(158, 47, 134);">11</div>
        <div style="height: 106px;background: rgb(30, 105, 20);">12</div>
        <div style="height: 257px;background: rgb(36, 35, 46);">13</div>
        <div style="height: 413px;background: rgb(175, 110, 36);">14</div>
        <div style="height: 304px;background: rgb(118, 151, 28);">15</div>
        <div style="height: 359px;background: rgb(51, 9, 148);">16</div>
        <div style="height: 148px;background: rgb(54, 110, 77);">17</div>
        <div style="height: 238px;background: rgb(230, 9, 9);">18</div>
        <div style="height: 268px;background: rgb(158, 57, 57);">19</div>
        <div style="height: 168px;background: rgb(27, 16, 16);">20</div> -->
    </div>
</body>
<script src="./index.js"></script>
<script>
    
        window.onresize = function () {
            renderDom('wrap')
        }
        renderDom('wrap')
        let a = 0
       let timer = setInterval(() => {
         a++
        // let ele = document.createElement('div')
        // ele.innerHTML = a
        // ele.style.height = `${getMath(50,100)}px`
        // ele.style.background = `rgb(${getMath(0,255)},${getMath(0,255)},${getMath(0,255)})`
        //document.getElementsByClassName('wrap')[0].appendChild(ele)
        if (a == 20) {
            clearInterval(timer)
        }
        let html = `<div style="height:${getMath(50,100)}px;background: rgb(${getMath(0,255)},${getMath(0,255)},${getMath(0,255)});"></div>
                    <div style="height:${getMath(50,100)}px;background: rgb(${getMath(0,255)},${getMath(0,255)},${getMath(0,255)});"></div>`
                    document.getElementsByClassName('wrap')[0].innerHTML += html
        renderDom('wrap')
    }, 2000)
    function renderDom (fatherDom) {
        let arrLength = Math.floor(document.documentElement.clientWidth / 120)
        let arr = new Array(arrLength)
        for (let i = 0; i < arr.length; i++) {
            arr[i] = 0
        }
        let domArr = document.querySelectorAll(`.${fatherDom}>div`)
       for (let i = 0; i < domArr.length; i++) {
            let minEleIndex = getArrMinIndex(arr)
            domArr[i].style.left = minEleIndex * 126.3 + 'px'
            domArr[i].style.top = arr[minEleIndex] + 'px'
            arr[minEleIndex] += domArr[i].offsetHeight
        }
    }
    function getArrMinIndex (arr) {
        let newArr = JSON.parse(JSON.stringify(arr))
        return arr.indexOf(newArr.sort(compare)[0])
    }
    function compare (x, y) { // 比较函数
      if (x < y) {
        return -1
      } else if (x > y) {
        return 1
      } else {
        return 0
      }
    }
    
</script>
</html>
